# FastAPI — описание WARC-архива

- **Сайт:** [FastAPI](https://fastapi.tiangolo.com/)
- **WARC-файл:** `fastapi.warc.gz` 
- **Дата и время сбора:** ноябрь 2025 
- **Размер архива:** 1.58 mb

## 1. Краткая характеристика сайта

FastAPI — это официальный сайт и документация одноимённого Python-фреймворка для создания веб-API. Сайт сочетает маркетинговую «лендинг»-страницу (описание ключевых преимуществ, ссылки на примеры и бенчмарки) и обширную документацию: руководства по первым шагам, разделы «Tutorial», «Advanced», «Deployment», справочные страницы по классам и функциям, а также материалы по безопасности, асинхронным веб-сокетам и интеграциям.

Контент преимущественно текстовый (статьи документации), с большим количеством внутренних ссылок, кода и блоков примеров. В оформлении активно используются изображения и логотипы спонсоров, скриншоты интерфейсов Swagger UI и ReDoc, а также статические ресурсы (CSS, JS) движка документации.

## 2. Параметры сбора архива

Для сбора архива использовалась утилита `wpull` по аналогичной схеме, как и для других сайтов коллекции. Пример команды:

```bash
wpull https://fastapi.tiangolo.com/ \
  --warc-file=fastapi \
  --recursive --level=1 \
  --page-requisites \
  --no-parent \
  --no-robots
````

Такая конфигурация позволяет:

* захватить главную страницу и первый уровень ссылок документации;
* подтянуть необходимые статические ресурсы (CSS, JS, изображения) для корректного отображения;
* ограничить глубину обхода, чтобы не уехать в сторонние сервисы и не перегружать коллекцию;
* игнорировать ограничения `robots.txt` в учебных целях (в боевой среде это делать не рекомендуется).

## 3. Оценка архивируемости (ArchiveReady)

Для URL [https://fastapi.tiangolo.com/](https://fastapi.tiangolo.com/) выполнена проверка в сервисе ArchiveReady (отчёт от 26.11.2025). По результатам: 

* **Website Archivability:** 84 %
* **Accessibility:** 66 %
* **Cohesion (связность):** 83 %
* **Metadata:** 100 %
* **Standards Compliance:** 86 %

### 3.1. Краткий разбор отчёта

**HTTP-заголовки и кэширование**

* Корректно задан тип содержимого: `Content-Type: text/html; charset=utf-8`.
* Включено сжатие ответа (`Content-Encoding: gzip`), что облегчает и ускоряет повторные загрузки страниц.
* Присутствуют заголовки кэширования: `Cache-Control: public, max-age=0, must-revalidate` и `ETag`, позволяющие боту повторно использовать уже скачанный контент при отсутствии изменений. 
* Дополнительно используются заголовки безопасности и политики передачи данных (`referrer-policy: strict-origin-when-cross-origin`, `x-content-type-options: nosniff`, `Vary: accept-encoding`), что соответствует современным практикам веб-разработки.

**robots.txt и карта сайта**

* В `robots.txt` отсутствуют директивы `Disallow:`, то есть архивирующие боты формально не ограничены в обходе сайта. 
* В то же время в отчёте зафиксирована ошибка: нет ссылки на `sitemap.xml` внутри `robots.txt`, хотя сам файл карты сайта существует по адресу [https://fastapi.tiangolo.com/sitemap.xml](https://fastapi.tiangolo.com/sitemap.xml) и корректно распознаётся сервисом. 

Это не мешает разовому захвату, но снижает удобство автоматического обхода для сторонних ботов, которые полагаются на связку `robots.txt + sitemap.xml`.

**Изображения и связность**

* ArchiveReady нашёл **40 локальных** изображений и **4 внешних** (remote) изображения. Внешние файлы — это в основном SVG-бейджи и счётчики (PyPI, GitHub Actions, покрытие тестами и пр.), которые отдаются с других доменов (shields.io, GitHub, внешние сервисы бэйджей).
* Локальные изображения включают:

  * логотипы и баннеры спонсоров (Render, Scalar, Subtotal, Zuplo, SerpAPI, Greptile, Railway, FastAPI Cloud и др.);
  * скриншоты интерфейсов Swagger UI и ReDoc;
  * иконки сайта и логотип самого FastAPI.

С точки зрения связности архива это означает, что основная визуальная часть сайта сохраняется вместе с WARC, но для полного воспроизведения «как в оригинале» желательно либо догружать внешние SVG-бейджи, либо мириться с их возможным отсутствием в будущем.

**Проверка форматов изображений (JHOVE)**

* ArchiveReady дополнительно прогоняет изображения через JHOVE: в отчёте фиксируется проверка всех 44 изображений, включая PNG и SVG-файлы.
* Для проверенных файлов статус — «Well-Formed and valid», MIME-тип определяется как `application/octet-stream` (для бинарных PNG) или `text/xml` (для SVG). Это означает, что с точки зрения форматной целостности изображения пригодны для долгосрочного хранения. 

В совокупности сайт показывает высокий уровень соответствия стандартам и хорошую пригодность для архивации.

## 4. Метаданные WARC (metawarc)

Метаданные по объектам WARC-архива извлечены командой:

```bash
metawarc metadata --output metadata/fastapi_meta.jsonl warcs/fastapi.warc.gz
```

Файл `fastapi_meta.jsonl` содержит записи по каждому загруженному объекту (HTTP-ответы страниц, статические ресурсы, редиректы). Типичная структура метаданных:

* **Основные поля:**

  * `url` — адрес ресурса (страница документации, изображение, CSS и т. д.);
  * `mime` — определённый MIME-тип (например, `text/html`, `image/png`, `image/svg+xml`, `text/css`, `application/javascript`);
  * `status` — HTTP-код ответа (200, 301 и т. п.);
  * `warc_type`, `warc_filename`, `record_length` и другие служебные поля.

* **По типам содержимого (`mime`) в архиве ожидаемо доминируют:**

  * `text/html` — HTML-страницы лендинга и документации;
  * `image/png` / `image/svg+xml` — скриншоты, логотипы и баннеры спонсоров, иконки;
  * `text/css` — таблицы стилей темы документации;
  * `application/javascript` — скрипты клиентской части (навигация, тёмная тема, поисковый интерфейс и пр.).

* **Служебные записи:**

  * для редиректов и некоторых технических ответов могут появляться записи с нестандартным или отсутствующим `mime` (например, при ошибках или промежуточных ответах).

При желании из `fastapi_meta.jsonl` можно построить таблицу распределения по MIME-типам и расширениям, аналогичную той, что приведена для 12factor, и включить её в общую сводку `warc-metadata-summary.md`. 

## 5. Наблюдения и выводы

* FastAPI как сайт документации даёт **богатую внутреннюю структуру ссылок**: множество разделов, руководств и справочных страниц. Это полезно для учебной коллекции WARC, поскольку позволяет демонстрировать, как архивируются сложные, но в основном статические документационные сайты.
* Высокие показатели **Metadata (100 %) и Standards Compliance (86 %)** говорят о том, что сайт разрабатывается с учётом современных веб-стандартов и хорошо описывает себя через HTTP-заголовки и HTML-метаданные. 
* **Связанность (Cohesion 83 %)** остаётся высокой несмотря на наличие внешних изображений-бейджей: критический визуальный контент (логотипы, скриншоты, баннеры) находится на основном домене и попадает в WARC-архив.
* Показатель **Accessibility (66 %)** чуть ниже остальных метрик, что типично для сложных документационных сайтов с большим объёмом навигационных элементов и сторонних интеграций. Для задач именно веб-архивации это не критично, но может быть важным, если рассматривать сайт с точки зрения доступности для пользователей с особыми потребностями.
* В целом FastAPI демонстрирует **очень хороший уровень архивируемости (84 %)**: при единичном захвате с глубиной `--level=1` получается репрезентативный срез документации и лендинга, достаточный для последующего анализа структуры сайта, типов ресурсов и поведения инструментов архивирования.

